.title
	%h2 Print
	%h1= export_title
	= link_for :cancel, controller_model

.scroller

	- if params[:export_kind]
		= semantic_form_for @export, url: export_path, html: { target: '_blank' } do |f|
			- if @export.errors.any?
				= debug @export.errors
				%p This export cannot be used:
				%ul.errors
					- @export.errors.full_messages do |error|
						%li= error
			
			- else
				%p #{pluralize @export.student_ids.count, 'student'} selected.
				- @export.student_ids.each do |id|
					= hidden_field_tag 'export[student_ids][]', id
				
				- if @export.student_ids.count > 1
					= f.inputs do
						= f.input :sort_by, collection: Student.sort_options
					
				- if @export.template && @export.template.prompts.any?
					%p Please fill in the appropriate values for the following fields.
					= f.inputs do
						- @export.template.prompts.each do |field|
							= f.input :prompt_values, label: field.name,
								input_html: { name: "export[prompt_values][#{field.name}]" }

				= f.actions do
					= f.action :submit
				
	- else
		%h6 Templates
		- available_types.each do |type|
			= link_to type.name, export_path(kind: 'print', id: type.id)
		- if permitted_to?(:zpass, controller_model)
			%h6 Zpass
			= link_to 'Zpass', export_path(kind: 'zpass')